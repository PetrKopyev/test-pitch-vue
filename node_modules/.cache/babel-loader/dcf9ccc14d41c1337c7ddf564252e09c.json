{"remainingRequest":"/Users/petrkopev/Work/test-pitch-vue/node_modules/babel-loader/lib/index.js!/Users/petrkopev/Work/test-pitch-vue/node_modules/eslint-loader/index.js??ref--14-0!/Users/petrkopev/Work/test-pitch-vue/src/store/modules/favourites.js","dependencies":[{"path":"/Users/petrkopev/Work/test-pitch-vue/src/store/modules/favourites.js","mtime":1665729399607},{"path":"/Users/petrkopev/Work/test-pitch-vue/babel.config.js","mtime":1664605590676},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGFwaSBmcm9tICdAL2FwaSc7CmltcG9ydCBodHRwQ2xpZW50LCB7IHNldFRva2VuIH0gZnJvbSAiQC9hcGkvaHR0cENsaWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiAoKSA9PiAoewogICAgZmF2b3VyaXRlczogW10sCiAgICB0b3RhbDogMAogIH0pLAogIG11dGF0aW9uczogewogICAgU0VUX0ZBVk9VUklURVMoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUuZmF2b3VyaXRlcyA9IHBheWxvYWQ7CiAgICB9LAoKICAgIFNFVF9GQVZPVVJJVEVTX0NPVU5UKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLnRvdGFsID0gcGF5bG9hZDsKICAgIH0KCiAgfSwKICBhY3Rpb25zOiB7CiAgICBhc3luYyBmZXRjaEZhdm91cml0ZXMoewogICAgICBjb21taXQKICAgIH0sIHsKICAgICAgbGltaXQgPSA1MCwKICAgICAgb2Zmc2V0CiAgICB9ID0ge30pIHsKICAgICAgdHJ5IHsKICAgICAgICBzZXRUb2tlbihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSk7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBhcGkuZmF2b3VyaXRlcy5nZXRGYXZvdXJpdGVzKHsKICAgICAgICAgIGxpbWl0LAogICAgICAgICAgb2Zmc2V0CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgZmF2b3VyaXRlcyA9IGRhdGEuZGF0YS5wcm9kdWN0c0Zhdm91cml0ZXM7CiAgICAgICAgY29tbWl0KCdTRVRfRkFWT1VSSVRFUycsIGZhdm91cml0ZXMpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgZmV0Y2hGYXZvdXJpdGVzQ291bnQoewogICAgICBjb21taXQKICAgIH0pIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZyhodHRwQ2xpZW50LmRlZmF1bHRzLmhlYWRlcnMpOwogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgYXBpLmZhdm91cml0ZXMuZ2V0RmF2b3VyaXRlc0NvdW50KCk7CiAgICAgICAgbGV0IHRvdGFsID0gZGF0YS5kYXRhLnByb2R1Y3RzRmF2b3VyaXRlcy5jb3VudDsKICAgICAgICBjb21taXQoJ1NFVF9GQVZPVVJJVEVTX0NPVU5UJywgdG90YWwpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgZGVsZXRlRmF2b3VyaXRlKHsKICAgICAgY29tbWl0LAogICAgICBzdGF0ZQogICAgfSwgewogICAgICBpZAogICAgfSkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IGFwaS5mYXZvdXJpdGVzLmRlbGV0ZUZhdm91cml0ZShpZCk7CiAgICAgICAgY29uc3QgbmV3RmF2b3VyaXRlcyA9IHN0YXRlLmZhdm91cml0ZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5pZCAhPT0gaWQpOwogICAgICAgIGNvbW1pdCgnU0VUX0ZBVk9VUklURVMnLCBuZXdGYXZvdXJpdGVzKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpOwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"names":["api","httpClient","setToken","namespaced","state","favourites","total","mutations","SET_FAVOURITES","payload","SET_FAVOURITES_COUNT","actions","fetchFavourites","commit","limit","offset","localStorage","getItem","data","getFavourites","productsFavourites","Promise","resolve","e","console","error","reject","fetchFavouritesCount","log","defaults","headers","getFavouritesCount","count","deleteFavourite","id","newFavourites","filter","item"],"sources":["/Users/petrkopev/Work/test-pitch-vue/src/store/modules/favourites.js"],"sourcesContent":["import api from '@/api';\nimport httpClient, {setToken} from \"@/api/httpClient\";\n\nexport default {\n    namespaced: true,\n\n    state: () => ({\n        favourites: [],\n        total: 0\n    }),\n\n    mutations: {\n        SET_FAVOURITES(state, payload) {\n            state.favourites = payload;\n        },\n        SET_FAVOURITES_COUNT(state, payload) {\n            state.total = payload\n        }\n    },\n\n    actions: {\n        async fetchFavourites({commit}, {limit = 50, offset} = {}) {\n            try {\n                setToken(localStorage.getItem('token'))\n\n                const {data} = await api.favourites.getFavourites({limit, offset});\n\n                const favourites = data.data.productsFavourites;\n\n                commit('SET_FAVOURITES', favourites);\n\n                return Promise.resolve();\n            } catch (e) {\n                console.error(e);\n\n                return Promise.reject();\n            }\n        },\n        async fetchFavouritesCount({commit},) {\n            try {\n                console.log(httpClient.defaults.headers)\n                const {data} = await api.favourites.getFavouritesCount();\n                let total = data.data.productsFavourites.count\n\n                commit('SET_FAVOURITES_COUNT', total);\n\n                return Promise.resolve();\n            } catch (e) {\n                console.error(e);\n\n                return Promise.reject();\n            }\n        },\n\n        async deleteFavourite({commit, state}, {id}) {\n            try {\n                await api.favourites.deleteFavourite(id);\n\n                const newFavourites = state.favourites.filter((item) => item.id !== id);\n\n                commit('SET_FAVOURITES', newFavourites);\n\n                return Promise.resolve();\n            } catch (e) {\n                console.error(e);\n\n                return Promise.reject();\n            }\n        },\n\n\n    },\n};\n"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,OAAhB;AACA,OAAOC,UAAP,IAAoBC,QAApB,QAAmC,kBAAnC;AAEA,eAAe;EACXC,UAAU,EAAE,IADD;EAGXC,KAAK,EAAE,OAAO;IACVC,UAAU,EAAE,EADF;IAEVC,KAAK,EAAE;EAFG,CAAP,CAHI;EAQXC,SAAS,EAAE;IACPC,cAAc,CAACJ,KAAD,EAAQK,OAAR,EAAiB;MAC3BL,KAAK,CAACC,UAAN,GAAmBI,OAAnB;IACH,CAHM;;IAIPC,oBAAoB,CAACN,KAAD,EAAQK,OAAR,EAAiB;MACjCL,KAAK,CAACE,KAAN,GAAcG,OAAd;IACH;;EANM,CARA;EAiBXE,OAAO,EAAE;IACL,MAAMC,eAAN,CAAsB;MAACC;IAAD,CAAtB,EAAgC;MAACC,KAAK,GAAG,EAAT;MAAaC;IAAb,IAAuB,EAAvD,EAA2D;MACvD,IAAI;QACAb,QAAQ,CAACc,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAR;QAEA,MAAM;UAACC;QAAD,IAAS,MAAMlB,GAAG,CAACK,UAAJ,CAAec,aAAf,CAA6B;UAACL,KAAD;UAAQC;QAAR,CAA7B,CAArB;QAEA,MAAMV,UAAU,GAAGa,IAAI,CAACA,IAAL,CAAUE,kBAA7B;QAEAP,MAAM,CAAC,gBAAD,EAAmBR,UAAnB,CAAN;QAEA,OAAOgB,OAAO,CAACC,OAAR,EAAP;MACH,CAVD,CAUE,OAAOC,CAAP,EAAU;QACRC,OAAO,CAACC,KAAR,CAAcF,CAAd;QAEA,OAAOF,OAAO,CAACK,MAAR,EAAP;MACH;IACJ,CAjBI;;IAkBL,MAAMC,oBAAN,CAA2B;MAACd;IAAD,CAA3B,EAAsC;MAClC,IAAI;QACAW,OAAO,CAACI,GAAR,CAAY3B,UAAU,CAAC4B,QAAX,CAAoBC,OAAhC;QACA,MAAM;UAACZ;QAAD,IAAS,MAAMlB,GAAG,CAACK,UAAJ,CAAe0B,kBAAf,EAArB;QACA,IAAIzB,KAAK,GAAGY,IAAI,CAACA,IAAL,CAAUE,kBAAV,CAA6BY,KAAzC;QAEAnB,MAAM,CAAC,sBAAD,EAAyBP,KAAzB,CAAN;QAEA,OAAOe,OAAO,CAACC,OAAR,EAAP;MACH,CARD,CAQE,OAAOC,CAAP,EAAU;QACRC,OAAO,CAACC,KAAR,CAAcF,CAAd;QAEA,OAAOF,OAAO,CAACK,MAAR,EAAP;MACH;IACJ,CAhCI;;IAkCL,MAAMO,eAAN,CAAsB;MAACpB,MAAD;MAAST;IAAT,CAAtB,EAAuC;MAAC8B;IAAD,CAAvC,EAA6C;MACzC,IAAI;QACA,MAAMlC,GAAG,CAACK,UAAJ,CAAe4B,eAAf,CAA+BC,EAA/B,CAAN;QAEA,MAAMC,aAAa,GAAG/B,KAAK,CAACC,UAAN,CAAiB+B,MAAjB,CAAyBC,IAAD,IAAUA,IAAI,CAACH,EAAL,KAAYA,EAA9C,CAAtB;QAEArB,MAAM,CAAC,gBAAD,EAAmBsB,aAAnB,CAAN;QAEA,OAAOd,OAAO,CAACC,OAAR,EAAP;MACH,CARD,CAQE,OAAOC,CAAP,EAAU;QACRC,OAAO,CAACC,KAAR,CAAcF,CAAd;QAEA,OAAOF,OAAO,CAACK,MAAR,EAAP;MACH;IACJ;;EAhDI;AAjBE,CAAf"}]}