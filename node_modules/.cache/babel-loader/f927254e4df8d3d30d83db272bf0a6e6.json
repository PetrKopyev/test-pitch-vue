{"remainingRequest":"/Users/petrkopev/Work/test-pitch-vue/node_modules/babel-loader/lib/index.js!/Users/petrkopev/Work/test-pitch-vue/node_modules/eslint-loader/index.js??ref--14-0!/Users/petrkopev/Work/test-pitch-vue/src/store/modules/auth.js","dependencies":[{"path":"/Users/petrkopev/Work/test-pitch-vue/src/store/modules/auth.js","mtime":1664607059054},{"path":"/Users/petrkopev/Work/test-pitch-vue/babel.config.js","mtime":1664605590676},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBhcGkgZnJvbSAnQC9hcGknOwppbXBvcnQgeyBkZWxldGVUb2tlbiwgc2V0VG9rZW4gfSBmcm9tICdAL2FwaS9odHRwQ2xpZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6ICgpID0+ICh7CiAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgfHwgJycsCiAgICByZWZyZXNoVG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZWZyZXNoVG9rZW4nKSB8fCAnJywKICAgIHVzZXJJZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpIHx8ICcnCiAgfSksCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVVNFUl9EQVRBKHN0YXRlLCB7CiAgICAgIHRva2VuLAogICAgICByZWZyZXNoVG9rZW4sCiAgICAgIHVzZXJJZAogICAgfSkgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgICBzdGF0ZS5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW47CiAgICAgIHN0YXRlLnVzZXJJZCA9IHVzZXJJZDsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncmVmcmVzaFRva2VuJywgcmVmcmVzaFRva2VuKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHVzZXJJZCk7CiAgICB9LAoKICAgIENMRUFSX1VTRVJfREFUQShzdGF0ZSkgewogICAgICBzdGF0ZS50b2tlbiA9ICcnOwogICAgICBzdGF0ZS5yZWZyZXNoVG9rZW4gPSAnJzsKICAgICAgc3RhdGUudXNlcklkID0gJyc7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncmVmcmVzaFRva2VuJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySWQnKTsKICAgIH0KCiAgfSwKICBhY3Rpb25zOiB7CiAgICBhc3luYyBhdXRoKHsKICAgICAgY29tbWl0CiAgICB9LCB7CiAgICAgIHVzZXJuYW1lID0gbnVsbCwKICAgICAgcGFzc3dvcmQgPSBudWxsCiAgICB9ID0ge30pIHsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IGFwaS5hdXRoLmF1dGgodXNlcm5hbWUsIHBhc3N3b3JkKTsKICAgICAgY29uc3QgdG9rZW4gPSBkYXRhLmFjY2Vzc190b2tlbjsKICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gZGF0YS5yZWZyZXNoX3Rva2VuOwogICAgICBjb25zdCB1c2VySWQgPSBkYXRhLnVzZXJfaWQ7CiAgICAgIHNldFRva2VuKHRva2VuKTsKICAgICAgY29tbWl0KCdTRVRfVVNFUl9EQVRBJywgewogICAgICAgIHRva2VuLAogICAgICAgIHJlZnJlc2hUb2tlbiwKICAgICAgICB1c2VySWQKICAgICAgfSk7CiAgICAgIGF3YWl0IHdpbmRvdy52bS4kcm91dGVyLnB1c2goJy8nKTsKICAgIH0sCgogICAgYXN5bmMgbG9nb3V0KHsKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIGF3YWl0IGFwaS5hdXRoLmxvZ291dCgpOwogICAgICBjb21taXQoJ0NMRUFSX1VTRVJfREFUQScpOwogICAgICBkZWxldGVUb2tlbigpOwogICAgICBhd2FpdCB3aW5kb3cudm0uJHJvdXRlci5wdXNoKCcvYXV0aCcpOwogICAgfQoKICB9LAogIGdldHRlcnM6IHsKICAgIGlzQXV0aChzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS50b2tlbjsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"names":["api","deleteToken","setToken","namespaced","state","token","localStorage","getItem","refreshToken","userId","mutations","SET_USER_DATA","setItem","CLEAR_USER_DATA","removeItem","actions","auth","commit","username","password","data","access_token","refresh_token","user_id","window","vm","$router","push","logout","getters","isAuth"],"sources":["/Users/petrkopev/Work/test-pitch-vue/src/store/modules/auth.js"],"sourcesContent":["import api from '@/api';\nimport { deleteToken, setToken } from '@/api/httpClient';\n\nexport default {\n    namespaced: true,\n\n    state: () => ({\n        token: localStorage.getItem('token') || '',\n        refreshToken: localStorage.getItem('refreshToken') || '',\n        userId: localStorage.getItem('userId') || '',\n    }),\n\n    mutations: {\n        SET_USER_DATA(state, { token, refreshToken, userId }) {\n            state.token = token;\n            state.refreshToken = refreshToken;\n            state.userId = userId;\n\n            localStorage.setItem('token', token);\n            localStorage.setItem('refreshToken', refreshToken);\n            localStorage.setItem('userId', userId);\n        },\n\n        CLEAR_USER_DATA(state) {\n            state.token = '';\n            state.refreshToken = '';\n            state.userId = '';\n\n            localStorage.removeItem('token');\n            localStorage.removeItem('refreshToken');\n            localStorage.removeItem('userId');\n        },\n    },\n\n    actions: {\n        async auth({ commit }, { username = null, password = null } = {}) {\n            const { data } = await api.auth.auth(username, password);\n            const token = data.access_token;\n            const refreshToken = data.refresh_token;\n            const userId = data.user_id;\n\n            setToken(token);\n\n            commit('SET_USER_DATA', { token, refreshToken, userId });\n\n            await window.vm.$router.push('/');\n        },\n\n        async logout({ commit }) {\n            await api.auth.logout();\n            commit('CLEAR_USER_DATA');\n            deleteToken();\n            await window.vm.$router.push('/auth');\n        },\n    },\n\n    getters: {\n        isAuth(state) {\n            return !!state.token;\n        },\n    },\n};\n"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,OAAhB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,kBAAtC;AAEA,eAAe;EACXC,UAAU,EAAE,IADD;EAGXC,KAAK,EAAE,OAAO;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,EAD9B;IAEVC,YAAY,EAAEF,YAAY,CAACC,OAAb,CAAqB,cAArB,KAAwC,EAF5C;IAGVE,MAAM,EAAEH,YAAY,CAACC,OAAb,CAAqB,QAArB,KAAkC;EAHhC,CAAP,CAHI;EASXG,SAAS,EAAE;IACPC,aAAa,CAACP,KAAD,EAAQ;MAAEC,KAAF;MAASG,YAAT;MAAuBC;IAAvB,CAAR,EAAyC;MAClDL,KAAK,CAACC,KAAN,GAAcA,KAAd;MACAD,KAAK,CAACI,YAAN,GAAqBA,YAArB;MACAJ,KAAK,CAACK,MAAN,GAAeA,MAAf;MAEAH,YAAY,CAACM,OAAb,CAAqB,OAArB,EAA8BP,KAA9B;MACAC,YAAY,CAACM,OAAb,CAAqB,cAArB,EAAqCJ,YAArC;MACAF,YAAY,CAACM,OAAb,CAAqB,QAArB,EAA+BH,MAA/B;IACH,CATM;;IAWPI,eAAe,CAACT,KAAD,EAAQ;MACnBA,KAAK,CAACC,KAAN,GAAc,EAAd;MACAD,KAAK,CAACI,YAAN,GAAqB,EAArB;MACAJ,KAAK,CAACK,MAAN,GAAe,EAAf;MAEAH,YAAY,CAACQ,UAAb,CAAwB,OAAxB;MACAR,YAAY,CAACQ,UAAb,CAAwB,cAAxB;MACAR,YAAY,CAACQ,UAAb,CAAwB,QAAxB;IACH;;EAnBM,CATA;EA+BXC,OAAO,EAAE;IACL,MAAMC,IAAN,CAAW;MAAEC;IAAF,CAAX,EAAuB;MAAEC,QAAQ,GAAG,IAAb;MAAmBC,QAAQ,GAAG;IAA9B,IAAuC,EAA9D,EAAkE;MAC9D,MAAM;QAAEC;MAAF,IAAW,MAAMpB,GAAG,CAACgB,IAAJ,CAASA,IAAT,CAAcE,QAAd,EAAwBC,QAAxB,CAAvB;MACA,MAAMd,KAAK,GAAGe,IAAI,CAACC,YAAnB;MACA,MAAMb,YAAY,GAAGY,IAAI,CAACE,aAA1B;MACA,MAAMb,MAAM,GAAGW,IAAI,CAACG,OAApB;MAEArB,QAAQ,CAACG,KAAD,CAAR;MAEAY,MAAM,CAAC,eAAD,EAAkB;QAAEZ,KAAF;QAASG,YAAT;QAAuBC;MAAvB,CAAlB,CAAN;MAEA,MAAMe,MAAM,CAACC,EAAP,CAAUC,OAAV,CAAkBC,IAAlB,CAAuB,GAAvB,CAAN;IACH,CAZI;;IAcL,MAAMC,MAAN,CAAa;MAAEX;IAAF,CAAb,EAAyB;MACrB,MAAMjB,GAAG,CAACgB,IAAJ,CAASY,MAAT,EAAN;MACAX,MAAM,CAAC,iBAAD,CAAN;MACAhB,WAAW;MACX,MAAMuB,MAAM,CAACC,EAAP,CAAUC,OAAV,CAAkBC,IAAlB,CAAuB,OAAvB,CAAN;IACH;;EAnBI,CA/BE;EAqDXE,OAAO,EAAE;IACLC,MAAM,CAAC1B,KAAD,EAAQ;MACV,OAAO,CAAC,CAACA,KAAK,CAACC,KAAf;IACH;;EAHI;AArDE,CAAf"}]}