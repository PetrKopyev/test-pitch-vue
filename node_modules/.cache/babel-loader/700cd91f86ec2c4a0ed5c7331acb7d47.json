{"remainingRequest":"/Users/petrkopev/Work/test-pitch-vue/node_modules/babel-loader/lib/index.js!/Users/petrkopev/Work/test-pitch-vue/node_modules/eslint-loader/index.js??ref--14-0!/Users/petrkopev/Work/test-pitch-vue/src/store/modules/auth.js","dependencies":[{"path":"/Users/petrkopev/Work/test-pitch-vue/src/store/modules/auth.js","mtime":1665729399753},{"path":"/Users/petrkopev/Work/test-pitch-vue/babel.config.js","mtime":1664605590676},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/petrkopev/Work/test-pitch-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBhcGkgZnJvbSAnQC9hcGknOwppbXBvcnQgeyBkZWxldGVUb2tlbiwgc2V0VG9rZW4gfSBmcm9tICdAL2FwaS9odHRwQ2xpZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6ICgpID0+ICh7CiAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgfHwgJycKICB9KSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9VU0VSX0RBVEEoc3RhdGUsIHsKICAgICAgdG9rZW4KICAgIH0pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOwogICAgfSwKCiAgICBDTEVBUl9VU0VSX0RBVEEoc3RhdGUpIHsKICAgICAgc3RhdGUudG9rZW4gPSAnJzsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpbmRleCcpOwogICAgfQoKICB9LAogIGFjdGlvbnM6IHsKICAgIGFzeW5jIGF1dGgoewogICAgICBjb21taXQKICAgIH0sIHsKICAgICAgdXNlcm5hbWUgPSBudWxsLAogICAgICBwYXNzd29yZCA9IG51bGwKICAgIH0gPSB7fSkgewogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgYXBpLmF1dGguYXV0aCh1c2VybmFtZSwgcGFzc3dvcmQpOwogICAgICBjb25zdCB0b2tlbiA9IGRhdGEuZGF0YS5BdXRob3JpemF0aW9uOwogICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpbmRleCcsIDEpOwogICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2luZGV4Jyk7CiAgICAgIGNvbW1pdCgnU0VUX1VTRVJfREFUQScsIHsKICAgICAgICB0b2tlbgogICAgICB9KTsKICAgICAgYXdhaXQgd2luZG93LnZtLiRyb3V0ZXIucHVzaCgnLycpOwogICAgfSwKCiAgICBhc3luYyBsb2dvdXQoewogICAgICBjb21taXQKICAgIH0pIHsKICAgICAgY29tbWl0KCdDTEVBUl9VU0VSX0RBVEEnKTsKICAgICAgZGVsZXRlVG9rZW4oKTsKICAgICAgYXdhaXQgYXBpLmF1dGgubG9nb3V0KCk7CiAgICAgIGF3YWl0IHdpbmRvdy52bS4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfQoKICB9LAogIGdldHRlcnM6IHsKICAgIGlzQXV0aChzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS50b2tlbjsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"names":["api","deleteToken","setToken","namespaced","state","token","localStorage","getItem","mutations","SET_USER_DATA","setItem","CLEAR_USER_DATA","removeItem","actions","auth","commit","username","password","data","Authorization","activeIndex","window","vm","$router","push","logout","getters","isAuth"],"sources":["/Users/petrkopev/Work/test-pitch-vue/src/store/modules/auth.js"],"sourcesContent":["import api from '@/api';\nimport {deleteToken, setToken} from '@/api/httpClient';\n\nexport default {\n    namespaced: true,\n\n    state: () => ({\n        token: localStorage.getItem('token') || '',\n    }),\n\n    mutations: {\n        SET_USER_DATA(state, {token}) {\n            state.token = token;\n\n            localStorage.setItem('token', token);\n        },\n\n        CLEAR_USER_DATA(state) {\n            state.token = '';\n            localStorage.removeItem('token');\n            localStorage.removeItem('index');\n        },\n    },\n\n    actions: {\n        async auth({commit}, {username = null, password = null} = {}) {\n            const {data} = await api.auth.auth(username, password);\n            const token = data.data.Authorization;\n            setToken(token);\n            localStorage.setItem('index', 1)\n            this.activeIndex = localStorage.getItem('index')\n\n            commit('SET_USER_DATA', {token});\n\n            await window.vm.$router.push('/');\n        },\n\n        async logout({commit}) {\n            commit('CLEAR_USER_DATA');\n            deleteToken();\n            await api.auth.logout();\n            await window.vm.$router.push('/login');\n        },\n    },\n\n    getters: {\n        isAuth(state) {\n            return !!state.token;\n        },\n    },\n};\n"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,OAAhB;AACA,SAAQC,WAAR,EAAqBC,QAArB,QAAoC,kBAApC;AAEA,eAAe;EACXC,UAAU,EAAE,IADD;EAGXC,KAAK,EAAE,OAAO;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC;EAD9B,CAAP,CAHI;EAOXC,SAAS,EAAE;IACPC,aAAa,CAACL,KAAD,EAAQ;MAACC;IAAD,CAAR,EAAiB;MAC1BD,KAAK,CAACC,KAAN,GAAcA,KAAd;MAEAC,YAAY,CAACI,OAAb,CAAqB,OAArB,EAA8BL,KAA9B;IACH,CALM;;IAOPM,eAAe,CAACP,KAAD,EAAQ;MACnBA,KAAK,CAACC,KAAN,GAAc,EAAd;MACAC,YAAY,CAACM,UAAb,CAAwB,OAAxB;MACAN,YAAY,CAACM,UAAb,CAAwB,OAAxB;IACH;;EAXM,CAPA;EAqBXC,OAAO,EAAE;IACL,MAAMC,IAAN,CAAW;MAACC;IAAD,CAAX,EAAqB;MAACC,QAAQ,GAAG,IAAZ;MAAkBC,QAAQ,GAAG;IAA7B,IAAqC,EAA1D,EAA8D;MAC1D,MAAM;QAACC;MAAD,IAAS,MAAMlB,GAAG,CAACc,IAAJ,CAASA,IAAT,CAAcE,QAAd,EAAwBC,QAAxB,CAArB;MACA,MAAMZ,KAAK,GAAGa,IAAI,CAACA,IAAL,CAAUC,aAAxB;MACAjB,QAAQ,CAACG,KAAD,CAAR;MACAC,YAAY,CAACI,OAAb,CAAqB,OAArB,EAA8B,CAA9B;MACA,KAAKU,WAAL,GAAmBd,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAnB;MAEAQ,MAAM,CAAC,eAAD,EAAkB;QAACV;MAAD,CAAlB,CAAN;MAEA,MAAMgB,MAAM,CAACC,EAAP,CAAUC,OAAV,CAAkBC,IAAlB,CAAuB,GAAvB,CAAN;IACH,CAXI;;IAaL,MAAMC,MAAN,CAAa;MAACV;IAAD,CAAb,EAAuB;MACnBA,MAAM,CAAC,iBAAD,CAAN;MACAd,WAAW;MACX,MAAMD,GAAG,CAACc,IAAJ,CAASW,MAAT,EAAN;MACA,MAAMJ,MAAM,CAACC,EAAP,CAAUC,OAAV,CAAkBC,IAAlB,CAAuB,QAAvB,CAAN;IACH;;EAlBI,CArBE;EA0CXE,OAAO,EAAE;IACLC,MAAM,CAACvB,KAAD,EAAQ;MACV,OAAO,CAAC,CAACA,KAAK,CAACC,KAAf;IACH;;EAHI;AA1CE,CAAf"}]}